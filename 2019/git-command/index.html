<!DOCTYPE html>
<html lang="zh-cn">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="Yuxiaobo">
  
  
  
  <link rel="prev" href="https://yuxiaobo96.github.io/2019/my-first-blog/" />
  <link rel="next" href="https://yuxiaobo96.github.io/2019/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85istio/" />
  <link rel="canonical" href="https://yuxiaobo96.github.io/2019/git-command/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Git Command | 将夜泊行
       
  </title>
  <meta name="title" content="Git Command | 将夜泊行">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/yuxiaobo96.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "Git Command",
    "headline" : "Git Command",
    "description" : "回退版本 当在工作区修改文件，还没 git add . 时： git checkout . (与 git add . 相对)或者 git reset \x26ndash;hard 当已经 git add .,保存到暂存区时： git reset(退回到第1）步骤) \x2b git",
    "inLanguage" : "zh-cn",
    "author" : "Yuxiaobo",
    "creator" : "Yuxiaobo",
    "publisher": "Yuxiaobo",
    "accountablePerson" : "Yuxiaobo",
    "copyrightHolder" : "Yuxiaobo",
    "copyrightYear" : "2019",
    "datePublished": "2019-12-11 09:53:26 \x2b0800 CST",
    "dateModified" : "2019-12-11 09:53:26 \x2b0800 CST",
    "url" : "https:\/\/yuxiaobo96.github.io\/2019\/git-command\/",
    "wordCount" : "1479",
    "keywords" : [  "将夜泊行"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
        
        <div class="top-scroll-bar"></div>
    
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://yuxiaobo96.github.io/">将夜泊行</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
        
        <div class="top-scroll-bar"></div>
    
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://yuxiaobo96.github.io/">将夜泊行</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Git Command</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://yuxiaobo96.github.io/" rel="author">Yuxiaobo</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-12-11 itemprop="datePublished">December 11, 2019</time>
                </span>
                in
                
                <span class="post-word-count">, 1479 words</span>
        </div>
    </header>
    <div class="post-content">
        

        

        
        
     
          
          
          

          
          
          

          

<h3 id="回退版本">回退版本</h3>

<ol>
<li>当在工作区修改文件，还没 <code>git add .</code> 时：
git checkout .
(与 git add . 相对)或者 git reset &ndash;hard</li>
<li>当已经 <code>git add .</code>,保存到暂存区时：
git reset(退回到第1）步骤) + git checkout .（回退到未修改状态）
或者 git reset &ndash;hard</li>
<li>当已经 <code>git commit</code>，保存到本地仓库时：
git reset &ndash;hard origin/master 从远程仓库重新拉代码（远程仓库主分支：origin/master）</li>
<li>当已经 <code>git push</code>，推送到远程仓库时：
先回退版本（即回退到第1）步骤之前，当时还未修改文件）
git reset &ndash;hard HEAD^（HEAD代表当前版本，^代表上一版本，也可用数字进行代替，如:HEAD~1）
也可以通过指定版本进行回退：git reset &ndash;hard +版本号（前7位就好）</li>
<li>再重新进行修改文件
在工作区里修改完文件后，git add 到暂存区，接着使用 git commit 保存到本地仓库
最后需强制推送到远程仓库
git push -f origin +分支名</li>
</ol>

<p><strong>提示</strong>：</p>

<ul>
<li>使用 <code>git log</code> 可查看每次提交 commit 的记录</li>
<li>使用 <code>git reflog</code> 可查看每一次 git 命令的使用记录（包括 checkout、merge、commit 等）</li>
</ul>

<h3 id="合并分之及解决冲突">合并分之及解决冲突</h3>

<ol>
<li>合并分之
可在当前分之上使用：git merge +其他分之</li>
<li>解决冲突
在当前分之上解决冲突；
去到提示的文件中 git 所标注的版本冲突处进行修改；
把修改后的冲突文件进行 git add、git commit 操作；
最后再git push -f origin +当前分之（也可以不强推）</li>
</ol>

<p><strong>提示</strong>：可以使用 <code>git log --graph</code> 命令查看分之的合并图</p>

<h3 id="在-clone-下来的其他分之上进行操作-如-release-1-14">在 clone 下来的其他分之上进行操作（如 release-1.14）</h3>

<ol>
<li>当 clone 下来一个项目时，只能看到一个 master 主分支；</li>
<li>使用<code>git branch -a</code> 可以看到所有分之；</li>
<li>此时需要创建远程 origin 的 release-1.14 分支到本地仓库上：
     git checkout -b release-1.14 origin/release-1.14
（或者先切换到要进行操作的远程分支上 git checkout remotes/origin/release-1.14；然后在此分之上创建与远程分之对应的本地分之 git checkout -b release-1.14）</li>
</ol>

<h3 id="将同一分之上已经提交的两条或多条-commit-信息合并-commit2-和-commit3">将同一分之上已经提交的两条或多条 commit 信息合并（commit2 和 commit3）</h3>

<ol>
<li>利用<code>git log</code>查看 commit 版本（最新的版本在最上面），
找到要合并 commit 版本的前一条的 commit 信息(commit1)；</li>
<li>使用git rebase -i + commit1版本号  (-i 参数指不需要合并 commit 的 hash 值)；
进入 vi 的编辑模式，上方未注释的部分是要执行的指令，下方注释的部分是指令的提示说明；
上方指令部分由三部分组成：命令名称、commit hash、commit message，
其中命令名称有两种：pick-执行该条commit；
                                         squash-把当前commit合并到前一个commit;</li>
<li>将后一个 commit 的前方命令 <code>pick</code> 改成 <code>sqash</code> 或 <code>s</code>,保存退出；
进入到 commit message 的编辑界面，将提示说明前（即#Pleasesa）的几行文字删除，增添新的 commit 信息即可，完成 commit 信息合并。</li>
</ol>

<p><strong>提示</strong>：</p>

<ul>
<li>git rebase &ndash;continue 继续运行（用于解决冲突后，使操作继续执行）</li>
<li>git rebase &ndash;abort 回退到变基前，即恢复所有的修改</li>
</ul>

<h3 id="保存当前分之修改-然后去修改其他分之-如当前分之修改到一半-急需去优先修改另一分之">保存当前分之修改，然后去修改其他分之（如当前分之修改到一半，急需去优先修改另一分之）</h3>

<ol>
<li>保存当前分之修改：
git slash</li>
<li>切换到另一分之进行搞作</li>
<li>切换到1.）步骤的分之，恢复并删除slash信息：
git stash pop</li>
<li>继续该分之的剩余修改</li>
</ol>

<h3 id="在当前分之上复制其他分之上的部分修改-比如某一模块中的bug">在当前分之上复制其他分之上的部分修改（比如某一模块中的bug）</h3>

<ol>
<li>首先使用 <code>git log</code> 找到其他分之此 bug 修改的版本（commit信息）</li>
<li>在当前分之：git cherry-pick +需要复制的 commit 版本号（前7位就好）</li>
</ol>

<h3 id="为-git-中常用的命令增加别名">为 git 中常用的命令增加别名</h3>

<ol>
<li>使用命令：
git config &ndash;global alias.别名 + 要修改的命令
如：git config &ndash;global alias.st status
     git config &ndash;global alias.co checkout</li>

<li><p>配置 Git 的时候，加上 <code>--global</code> 是针对当前用户起作用的，如果不加，那只针对当前的仓库起作用。
每个仓库的 Git 配置文件都放在 <code>.git/config</code> 文件中：</p>

<pre><code class="language-bash">$personal-blog git:(master) cat .git/config
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true
[remote &quot;origin&quot;]
	url = https://github.com/yuxiaobo96/personal-blog.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch &quot;master&quot;]
	remote = origin
	merge = refs/heads/master

</code></pre></li>

<li><p>当前用户的 Git 配置文件放在用户主目录下的一个隐藏文件 <code>.gitconfig</code> 中：</p>

<pre><code class="language-bash">$ ~ cat .gitconfig
[user]
	name = yuxiaobo
	email = yuxiaobogo@163.com
[alias]
	st = status
</code></pre></li>
</ol>

<p><strong>提示</strong>：也可直接在这两个文件下编辑修改或删除。</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>Yuxiaobo </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://yuxiaobo96.github.io/2019/git-command/>https://yuxiaobo96.github.io/2019/git-command/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://yuxiaobo96.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://yuxiaobo96.github.io/2019/my-first-blog/" class="prev" rel="prev" title="My First Blog"><i class="iconfont icon-left"></i>&nbsp;My First Blog</a>
         
        
        <a href="https://yuxiaobo96.github.io/2019/%E4%BD%BF%E7%94%A8helm%E5%AE%89%E8%A3%85istio/" class="next" rel="next" title="使用helm安装Istio">使用helm安装Istio&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
        
<div id="gitalk-container"></div>
<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<script>
  const gitalk = new Gitalk({
    clientID: 'cdf2110576d2e664531d',
    clientSecret: '6a6c277a187f8ecef693d89e334a942aee820a96',
    repo: 'yuxiaobo96.github.io',
    owner: 'yuxiaobo96',
    admin: ['yuxiaobo96'],
    id: location.pathname, 
    distractionFreeMode: false 
  });
  (function() {
    if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
      document.getElementById('gitalk-container').innerHTML = 'Gitalk comments not available by default when the website is previewed locally.';
      return;
    }
    gitalk.render('gitalk-container');
  })();
</script>

    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2019 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://yuxiaobo96.github.io/">Yuxiaobo</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>













    
    
    <script src="/js/vendor_no_gallery.min.js" async=""></script>
    
  



     </div>
  </body>
</html>
